{% extends 'layout.html' %}

{% block body %}

<main>
    <div class="container-fluid px-4">
        <h1 class="mt-4">Usuarios</h1>
        <ol class="breadcrumb mb-4">
            <li class="breadcrumb-item"><a href="/index">Dashboard</a></li>
            <li class="breadcrumb-item active">Usuarios</li>
        </ol>
        
        <div class="card mb-4">
            <div class="card-header">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="26" viewBox="0 0 48 37" fill="none">
                    <path d="M24 0C25.8565 0 27.637 0.940946 28.9497 2.61584C30.2625 4.29073 31 6.56238 31 8.93104C31 11.2997 30.2625 13.5713 28.9497 15.2462C27.637 16.9211 25.8565 17.8621 24 17.8621C22.1435 17.8621 20.363 16.9211 19.0503 15.2462C17.7375 13.5713 17 11.2997 17 8.93104C17 6.56238 17.7375 4.29073 19.0503 2.61584C20.363 0.940946 22.1435 0 24 0ZM10 6.37931C11.12 6.37931 12.16 6.76207 13.06 7.45104C12.76 11.1 13.6 14.7234 15.32 17.5559C14.32 20.0055 12.32 21.6897 10 21.6897C8.4087 21.6897 6.88258 20.8831 5.75736 19.4475C4.63214 18.0119 4 16.0648 4 14.0345C4 12.0042 4.63214 10.0571 5.75736 8.62146C6.88258 7.18583 8.4087 6.37931 10 6.37931ZM38 6.37931C39.5913 6.37931 41.1174 7.18583 42.2426 8.62146C43.3679 10.0571 44 12.0042 44 14.0345C44 16.0648 43.3679 18.0119 42.2426 19.4475C41.1174 20.8831 39.5913 21.6897 38 21.6897C35.68 21.6897 33.68 20.0055 32.68 17.5559C34.4 14.7234 35.24 11.1 34.94 7.45104C35.84 6.76207 36.88 6.37931 38 6.37931ZM11 32.5345C11 27.2524 16.82 22.9655 24 22.9655C31.18 22.9655 37 27.2524 37 32.5345V37H11V32.5345ZM0 37V33.1724C0 29.6255 3.78 26.64 8.9 25.7724C7.72 27.5076 7 29.9062 7 32.5345V37H0ZM48 37H41V32.5345C41 29.9062 40.28 27.5076 39.1 25.7724C44.22 26.64 48 29.6255 48 33.1724V37Z" fill="black"/>
                  </svg>
                Lista de trabajadores <a href="/usuario/add/"> <button type="button" class="btn btn-primary btn-flat">  <span class="glyphicon glyphicon-plus"></span> Nuevo Usuario  </button> </a>
            </div>
            <div class="card-body">
              <table id="datatablesSimple">
                <thead align="center">
                  <tr>
                    <th>Nombres</th>
                    <th>Apellidos</th>
                    <th>Email</th>
                    <th>Telefono</th>
                    <th>Rol</th>
                    <th>Estado</th>
                    <th>Acci√≥n</th>
                  </tr>
                </thead>
      
                <tbody>
                  {% if data|length == 0 %}
                  <tr>
                    <td>No Data</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>No Data</td>
                    <td></td>
                    <td></td>
                    <td>No Data</td>
                    <td></td>
                    <td>No Data</td>
                    <td>No Data</td>
                    <td>No Data</td>
                    <td>No Data</td>
                    <td>No Data</td>
                    <td>No Data</td>
                    <td>No Data</td>
                  </tr>
                  {% else %}
                  <tr>
                    {% for row in data %}
                    <td>{{ row[1] }}</td>
                    <td>{{ row[2] }}</td>
                    <td>{{ row[3] }}</td>
                    <td>{{ row[5] }}</td>
                    <td>{{ row[6] }}</td>
                    <td>{{ row[8] }}</td>
                    <td align="center">
                      <a href="/usuario/update/{{ row[0]}}"><button type="button" class="btn btn-warning" title="Editar"><svg class="icono-tabla" xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
                          <path d="M16.7238 4.04194C17.0921 3.65199 17.0921 3.00208 16.7238 2.63213L14.5141 0.292459C14.1647 -0.0974865 13.5509 -0.0974865 13.1826 0.292459L11.4451 2.12221L14.9863 5.87168M0 14.2505V18H3.54118L13.9853 6.93154L10.4441 3.18206L0 14.2505Z" fill="black"/>
                        </svg></button></a>

                      <a href="/usuario/delete/{{ row[0]}}">
                        <button type="button" class="btn btn-danger" title="Borrar"><svg class="icono-tabla" xmlns="http://www.w3.org/2000/svg" width="14" height="18" viewBox="0 0 14 18" fill="none">
                          <path d="M14 1H10.5L9.5 0H4.5L3.5 1H0V3H14M1 16C1 16.5304 1.21071 17.0391 1.58579 17.4142C1.96086 17.7893 2.46957 18 3 18H11C11.5304 18 12.0391 17.7893 12.4142 17.4142C12.7893 17.0391 13 16.5304 13 16V4H1V16Z" fill="black"/>
                        </svg></button>
                      </a>
                    </td>
                  </tr>
                  {% endfor %}
                  {% endif%}
                </tbody>
              </table>
            </div>
        </div>
    </div>

    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Nuevo usuario</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form class="row g-3" method="POST" action="/usuario/addusuario">
              <div class="col-12">
                <label  class="form-label">Nombre</label>
                <input name="nombre" type="text" class="form-control" required>
              </div>
              <div class="col-md-6">
                <label  class="form-label">Telefono</label>
                <input name="telefono" type="tel" class="form-control" required >
              </div>
              <div class="col-md-6">
                <label for="inputEmail4" class="form-label">Email</label>
                <input name="email" type="email" class="form-control" id="inputEmail4" required>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            <input name="save" type="submit" class="btn btn-info pull-right" value="Guardar" >
          </div>
        </div>
      </div>
    </div>

</main>

{% endblock %}